<html>

<head>
<title>PORTSEARCH</title>
</head>

<body bgcolor=#f0f0f0 text=#000030>

<center><font size=+2><b>PORTSEARCH</b></font></center><br>
<br>

<font size=+1><u>Missions</u></font><br>
* Allow searching for ports that install some file, like <nobr><i>find /usr/ports -name pkg-plist |xargs grep pattern</i></nobr><br>
* Be as fast as possible<br>
* Do everything that can be done with <i>make search</i> in the ports directory and with <i>/usr/ports/Tools/scripts/portsearch</i> so it is possible to use one tool for all kinds of searching<br>
<br>

<font size=+1><u>Current features</u></font><br>
* Allows searching for ports by name, key (name, comment or dependencies), path, info (comment), maintainer, category, fetch, extract, patch, build and run dependencies, www site and <b>packing list file</b><br>
* Stores the packing lists of all ports in its own database, allowing fast search and report<br>
* Incremental updates of its database in addition to database creation from scratch. While database creation is relatively slow operation (as slow as <i>make index</i> or even slower) portsearch supports incremental database updating, generating only the packing lists of the ports that have changed since the last database creation/update. This speeds up creating an up to date database to a reasonable amount of time, once an old database is present.<br>
<br>

<font size=+1><u>Pre-history</u></font><br>
Once upon a time I got tired of typing commands that wrapped on the screen for searching a port that installs a given file and waiting thousands of seconds for the operation to complete. This appeared to be a common task, so I did something like <nobr><i>cat /usr/ports/*/*/pkg-plist &gt; /tmp/plist-all</i></nobr>, but this had some major flaws like missing the <i>PLIST_(FILES|DIRS)</i> variables in Makefiles and not expanding <i>%%FOOBAR%%</i> variables. So I wrote simple 50-70 lines sh script that used <i>generate-plist</i> target which worked ok for a while, but as it got complex with incremental updates and other extensions it also got slow. Then I decied to use the big gun and wrote it in C. That's how portsearch appeared.<br>
<br>

<font size=+1><u>Flaws</u></font><br>
Some ports generate their plists after being installed, making it impossible to record the plist without fetching the source tarballs, compiling and installing the software. Currently for these ports empty or flawed plists are recorded. One way to fix this problem is to retrieve the plists for these ports from the precompiled packages available at ftp.freebsd.org but the whole packages need to be fetched, causing (large) amount of unefficient network traffic.<br>
<br>

<font size=+1><u>About the name</u></font><br>
I choose <i>portsearch</i> for obvious reasons. It does not interfere with any existing software, particularly <i>/usr/ports/Tools/scripts/portsearch</i> as the tool installs in /usr/local/bin/ and /usr/ports/Tools/scripts/ is not in the <i>PATH</i> by default. On 23 Dec 2005 I emailed the author of <i>scripts/portsearch</i> <nobr>Mark Ovens &lt;marko@&gt;</nobr> and asked him if he has something against a tool with the same name to exist in /usr/local/bin/. I got no answer since then.<br>
<br>

<font size=+1><u>Download</u></font><br>
Current version is <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/local-distfiles/vd/portsearch/portsearch-1.3.1.tar.gz">1.3.1</a>, released on 11 Aug 2007<br>
FreeBSD Port is also <a href="http://cvsweb.freebsd.org/ports/ports-mgmt/portsearch">available</a>.<br>
<br>

<font size=+1><u>Author</u></font><br>
Vasil Dimov &lt;gro.DSBeerF@dv&gt;<br>
<br>

<font size=-1><i>$Id: index.html,v 1.8.2.2 2007/08/11 14:37:56 vd-dev Exp $</i></font>

</body>

</html>
